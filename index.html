<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Students Register App</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,100..1000&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/dist/style.css">
</head>
<body class="m-0 p-0 box-border bg-gray-100">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div id="general-container" class="w-full flex flex-col items-center"></div>
        <div id="class-container" class="w-full flex flex-col items-center"></div>
        <div id="graded-container" class="w-full flex flex-col items-center"></div>
        <footer id="the-conclusion"></footer>
    </div>
    <script>
        // Data
        const studentsRegister = [
            { name: "Samuel Adeyemi", class: "JSS1", score: 31 },
            { name: "Rita Smith", class: "JSS1", score: 44 },
            { name: "David Smith", class: "JSS1", score: 54 },
            { name: "Paul Adeyemi", class: "JSS1", score: 99 },
            { name: "James Okafor", class: "JSS1", score: 81 },
            { name: "Amaka Okafor", class: "JSS2", score: 88 },
            { name: "David Abubakar", class: "JSS2", score: 48 },
            { name: "Amaka Johnson", class: "JSS2", score: 37 },
            { name: "Joy Ibrahim", class: "JSS2", score: 93 },
            { name: "Amaka Abubakar", class: "JSS2", score: 61 },
            { name: "Joy Okafor", class: "JSS3", score: 71 },
            { name: "Mary Uche", class: "JSS3", score: 49 },
            { name: "John Ojo", class: "JSS3", score: 42 },
            { name: "Rita Okafor", class: "JSS3", score: 30 },
            { name: "Grace Johnson", class: "JSS3", score: 94 },
            { name: "Rita Okafor", class: "SS1", score: 51 },
            { name: "James Ibrahim", class: "SS1", score: 47 },
            { name: "Joy Uche", class: "SS1", score: 87 },
            { name: "Paul Abubakar", class: "SS1", score: 35 },
            { name: "Samuel Ibrahim", class: "SS1", score: 92 },
            { name: "Samuel Abubakar", class: "SS2", score: 80 },
            { name: "David Adeyemi", class: "SS2", score: 99 },
            { name: "Grace Ibrahim", class: "SS2", score: 42 },
            { name: "Joy Ojo", class: "SS2", score: 66 },
            { name: "Grace Abubakar", class: "SS2", score: 30 },
            { name: "Grace Abubakar", class: "SS3", score: 61 },
            { name: "Grace Ibrahim", class: "SS3", score: 67 },
            { name: "James Ibrahim", class: "SS3", score: 30 },
            { name: "Joy Ojo", class: "SS3", score: 87 },
            { name: "John Abubakar", class: "SS3", score: 95 },
        ];

        // Function to calculate grade
        const getGrade = (score) => {
            if (score >= 70 && score <= 100) return "A";
            if (score >= 60 && score <= 69) return "B";
            if (score >= 50 && score <= 59) return "C";
            if (score >= 40 && score <= 49) return "D";
            return "F";
        };

        // All Students
        const generalContainer = document.querySelector("#general-container");
        generalContainer.classList.add("py-12");

        const title = document.createElement("h1");
        title.className = "text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-center mx-auto";
        title.innerText = "School Register";
        generalContainer.appendChild(title);

        const allStudentsContainer = document.createElement("div");
        allStudentsContainer.id = "allstuds";
        allStudentsContainer.className = "my-10 overflow-x-auto w-full max-w-full px-4 sm:px-6";
        generalContainer.appendChild(allStudentsContainer);

        let allStudentsHTML = `
            <table class="w-full bg-white border border-gray-200 mx-auto">
                <thead class="bg-gray-200 text-left text-sm font-semibold text-gray-700">
                    <tr>
                        <th class="px-4 py-2 border-b w-[5%]">S/N</th>
                        <th class="px-4 py-2 border-b w-[45%]">Name</th>
                        <th class="px-4 py-2 border-b w-[20%]">Class</th>
                        <th class="px-4 py-2 border-b w-[15%]">Score</th>
                        <th class="px-4 py-2 border-b w-[15%]">Grade</th>
                    </tr>
                </thead>
                <tbody class="text-sm">
        `;
        let sn = 1;
        let totalScore = 0;

        studentsRegister.forEach((student) => {
            const grade = getGrade(student.score);
            allStudentsHTML += `
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-2 border-b">${sn++}.</td>
                    <td class="px-4 py-2 border-b">${student.name}</td>
                    <td class="px-4 py-2 border-b">${student.class}</td>
                    <td class="px-4 py-2 border-b">${student.score}</td>
                    <td class="px-4 py-2 border-b">${grade}</td>
                </tr>
            `;
            totalScore += student.score;
        });

        allStudentsHTML += "</tbody></table>";

        const overallPerformance = Math.ceil((totalScore / (studentsRegister.length * 100)) * 100);
        const overallSchoolScoreContainer = document.createElement("div");
        overallSchoolScoreContainer.className = "text-center mt-4 text-sm sm:text-base";
        overallSchoolScoreContainer.innerHTML = `<strong>Overall School Performance:</strong> ${overallPerformance}%`;

        const allstuds = document.getElementById("allstuds");
        allstuds.innerHTML = allStudentsHTML;
        allstuds.appendChild(overallSchoolScoreContainer);

        // Students By Class
        const classContainer = document.querySelector("#class-container");
        classContainer.classList.add("my-12");

        const classTitle = document.createElement("h1");
        classTitle.className = "text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-center mx-auto";
        classTitle.innerText = "School Register By Class";
        classContainer.appendChild(classTitle);

        // Helper function to create class table
        const createClassTable = (className, containerId, titleText) => {
            const title = document.createElement("h2");
            title.className = "text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-center mx-auto mt-8";
            title.innerText = titleText;
            classContainer.appendChild(title);

            const container = document.createElement("div");
            container.id = containerId;
            container.className = "my-10 overflow-x-auto w-full max-w-full px-4 sm:px-6";
            classContainer.appendChild(container);

            let html = `
                <table class="w-full bg-white border border-gray-200 mx-auto">
                    <thead class="bg-gray-200 text-left text-sm font-semibold text-gray-700">
                        <tr>
                            <th class="px-4 py-2 border-b w-[5%]">S/N</th>
                            <th class="px-4 py-2 border-b w-[45%]">Name</th>
                            <th class="px-4 py-2 border-b w-[20%]">Class</th>
                            <th class="px-4 py-2 border-b w-[15%]">Score</th>
                            <th class="px-4 py-2 border-b w-[15%]">Grade</th>
                        </tr>
                    </thead>
                    <tbody class="text-sm">
            `;
            let sn = 1;

            studentsRegister.forEach((student) => {
                if (student.class === className) {
                    const grade = getGrade(student.score);
                    html += `
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 border-b">${sn++}.</td>
                            <td class="px-4 py-2 border-b">${student.name}</td>
                            <td class="px-4 py-2 border-b">${student.class}</td>
                            <td class="px-4 py-2 border-b">${student.score}</td>
                            <td class="px-4 py-2 border-b">${grade}</td>
                        </tr>
                    `;
                }
            });

            html += "</tbody></table>";
            document.getElementById(containerId).innerHTML = html;
        };

        createClassTable("JSS1", "jss1Studs", "JSS 1");
        createClassTable("JSS2", "jss2Studs", "JSS 2");
        createClassTable("JSS3", "jss3Studs", "JSS 3");
        createClassTable("SS1", "ss1Studs", "SS 1");
        createClassTable("SS2", "ss2Studs", "SS 2");
        createClassTable("SS3", "ss3Studs", "SS 3");

        // Students By Grades
        const gradeContainer = document.querySelector("#graded-container");
        gradeContainer.classList.add("my-12");

        const gradeTitle = document.createElement("h1");
        gradeTitle.className = "text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-center mx-auto";
        gradeTitle.innerText = "School Register By Grades";
        gradeContainer.appendChild(gradeTitle);

        // Helper function to create grade table
        const createGradeTable = (gradeLetter, containerId, titleText) => {
            const title = document.createElement("h2");
            title.className = "text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-center mx-auto mt-8";
            title.innerText = titleText;
            gradeContainer.appendChild(title);

            const container = document.createElement("div");
            container.id = containerId;
            container.className = "my-10 overflow-x-auto w-full max-w-full px-4 sm:px-6";
            gradeContainer.appendChild(container);

            let html = `
                <table class="w-full bg-white border border-gray-200 mx-auto">
                    <thead class="bg-gray-200 text-left text-sm font-semibold text-gray-700">
                        <tr>
                            <th class="px-4 py-2 border-b w-[5%]">S/N</th>
                            <th class="px-4 py-2 border-b w-[45%]">Name</th>
                            <th class="px-4 py-2 border-b w-[20%]">Class</th>
                            <th class="px-4 py-2 border-b w-[15%]">Score</th>
                            <th class="px-4 py-2 border-b w-[15%]">Grade</th>
                        </tr>
                    </thead>
                    <tbody class="text-sm">
            `;
            let sn = 1;

            studentsRegister.forEach((student) => {
                const grade = getGrade(student.score);
                if (grade === gradeLetter) {
                    html += `
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 border-b">${sn++}.</td>
                            <td class="px-4 py-2 border-b">${student.name}</td>
                            <td class="px-4 py-2 border-b">${student.class}</td>
                            <td class="px-4 py-2 border-b">${student.score}</td>
                            <td class="px-4 py-2 border-b">${grade}</td>
                        </tr>
                    `;
                }
            });

            html += "</tbody></table>";
            document.getElementById(containerId).innerHTML = html;
        };

        createGradeTable("A", "aStuds", "A Graders");
        createGradeTable("B", "bStuds", "B Graders");
        createGradeTable("C", "cStuds", "C Graders");
        createGradeTable("D", "dStuds", "D Graders");
        createGradeTable("F", "fStuds", "Failed");

        // Footer
        const theConclusion = document.querySelector("#the-conclusion");
        theConclusion.className = "my-6 text-center text-base sm:text-lg text-gray-600";
        theConclusion.innerText = "Link to my GitHub repo? ";
        const footnote = document.createElement("a");
        footnote.href = "https://github.com/dgplang/students-register";
        footnote.className = "text-blue-600 hover:underline";
        footnote.target = "_blank";
        footnote.rel = "noopener noreferrer";
        footnote.innerText = "Click Here";
        theConclusion.appendChild(footnote);
    </script>
</body>
</html>